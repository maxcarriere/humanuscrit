---
layout: default
---

{% if page.title %}
<h1 class="post-title">{{ page.title }}</h1>
{% endif %}

{{ content }}

<!-- Compteur de visites public (countapi.xyz, sans backend) — visible uniquement sur l’accueil -->
<div id="visitor-counter" aria-label="Compteur de visites">
  Humanuscrit — visiteurs depuis l'origine : <span id="visitors-counter">0</span>
</div>
<p class="visitor-counter-link"><a href="{{ '/evolution/' | relative_url }}">Suivre l'évolution</a></p>
<script>
fetch('/assets/data/visits.json')
  .then(function(r){ return r.json(); })
  .then(function(data){
    var total = 0;
    if(Array.isArray(data)){
      total = data.reduce(function(sum, d){ return sum + (d.sessions || 0); }, 0);
    }
    var el = document.getElementById('visitors-counter');
    if(el){
      el.textContent = total;
    }
  })
  .catch(function(){
    var el = document.getElementById('visitors-counter');
    if(el){
      el.textContent = "0";
    }
  });
</script>
